<!DOCTYPE html>
<html>
<head>
  <title>Inventory Admin</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="header">
  <img src="pricol_logo.png.jpg" class="logo">
  <h2 class="title">Inventory Admin Panel</h2>
</div>

<input type="password" id="pin" placeholder="Enter Admin PIN">
<button onclick="login()">Login</button>

<div id="adminPanel" style="display:none">

  <h3 class="title">Add / Update Item</h3>
  <input id="itemName" placeholder="Item Name">
  <select id="rackSelect">
    <option value="A">Rack A</option>
    <option value="B">Rack B</option>
    <option value="C">Rack C</option>
  </select>
  <select id="statusSelect">
    <option value="true">Available</option>
    <option value="false">Not Available</option>
  </select>
  <button onclick="addItem()">Add / Update</button>
  <p id="adminMsg" class="adminStatus"></p>

  <h3 class="title">Remove Item</h3>
  <select id="removeSelect"></select>
  <button onclick="removeItem()">Remove Item</button>
  <p id="removeMsg" class="adminStatus"></p>

</div>

<script src="script.js"></script>
<script>
  const ADMIN_PIN = "8901425000625";

  function login() {
    if (document.getElementById("pin").value === ADMIN_PIN) {
      document.getElementById("adminPanel").style.display = "block";
      document.getElementById("pin").style.display = "none";
      refreshAdmin();
    } else {
      alert("Invalid PIN");
    }
  }

  function refreshAdmin() {
    populateDropdown("removeSelect");
  }

  function addItem() {
    const name = document.getElementById("itemName").value.trim();
    const rack = document.getElementById("rackSelect").value;
    const available = document.getElementById("statusSelect").value === "true";

    if (!name) return;

    let inventory = getInventory();
    const existing = inventory.find(i => i.name === name);

    if (existing) {
      existing.rack = rack;
      existing.available = available;
      document.getElementById("adminMsg").textContent = "Item updated";
    } else {
      inventory.push({ name, rack, available });
      document.getElementById("adminMsg").textContent = "Item added";
    }

    saveInventory(inventory);
    refreshAdmin();
  }

  function removeItem() {
    const itemName = document.getElementById("removeSelect").value;
    let inventory = getInventory();

    inventory = inventory.filter(i => i.name !== itemName);
    saveInventory(inventory);

    document.getElementById("removeMsg").textContent =
      `Item "${itemName}" removed`;

    refreshAdmin();
  }
</script>

</body>
</html>
